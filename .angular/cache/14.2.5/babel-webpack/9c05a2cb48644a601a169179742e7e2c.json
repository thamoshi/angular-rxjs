{"ast":null,"code":"import { Observable, debounceTime, distinctUntilChanged, filter, map, switchMap, tap } from 'rxjs';\nimport { FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/book.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../components/book/book.component\";\n\nfunction BookListComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\n\nfunction BookListComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.totalBooksFound, \" de livros encontrados \");\n  }\n}\n\nfunction BookListComponent_div_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-book\", 12);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const book_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"book\", book_r7);\n  }\n}\n\nfunction BookListComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtemplate(1, BookListComponent_div_11_div_1_Template, 2, 1, \"div\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const bookList_r5 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", bookList_r5);\n  }\n}\n\nfunction BookListComponent_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"h1\", 14);\n    i0.ɵɵtext(2, \"Busque o livro \");\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵtext(4, \" que quiser na \");\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵtext(6, \" nossa estante!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"img\", 15);\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst DELAY = 1000;\nexport class BookListComponent {\n  constructor(bookService) {\n    this.bookService = bookService;\n    this.searchBar = new FormControl();\n    this.errorMessage = '';\n    this.booksFound$ = this.searchBar.valueChanges.pipe(filter(input => input.length >= 3), debounceTime(DELAY), distinctUntilChanged(), tap(() => console.log(\"começa a fazer requisição\")), switchMap(typedValue => {\n      const bookList = this.bookService.search(typedValue);\n      return bookList;\n    }));\n    this.totalBooksFound$ = this.booksFound$.pipe(map(books => books.length));\n  }\n\n}\n\nBookListComponent.ɵfac = function BookListComponent_Factory(t) {\n  return new (t || BookListComponent)(i0.ɵɵdirectiveInject(i1.BookService));\n};\n\nBookListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BookListComponent,\n  selectors: [[\"app-book-list\"]],\n  decls: 15,\n  vars: 7,\n  consts: [[1, \"container\"], [1, \"search\"], [\"type\", \"search\", 3, \"formControl\"], [\"src\", \"assets/images/icone-busca.png\", \"alt\", \"Lupa de cor roxa\"], [\"class\", \"results error-message\", 4, \"ngIf\"], [\"class\", \"results\", 4, \"ngIf\"], [\"class\", \"container-card\", 4, \"ngIf\", \"ngIfElse\"], [\"initialScreen\", \"\"], [1, \"results\", \"error-message\"], [1, \"results\"], [1, \"container-card\"], [4, \"ngFor\", \"ngForOf\"], [3, \"book\"], [1, \"images\"], [1, \"title\"], [\"src\", \"../../assets/images/ilustracao-estante.png\", \"alt\", \"Ilustra\\u00E7\\u00E3o de uma pessoa em p\\u00E9 ao lado de uma estante com livros e plantas\", 1, \"ilustration\"]],\n  template: function BookListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"header\");\n      i0.ɵɵtext(2, \"Que livro voc\\u00EA procura?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵelement(4, \"input\", 2);\n      i0.ɵɵelementStart(5, \"button\");\n      i0.ɵɵelement(6, \"img\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"p\");\n      i0.ɵɵtext(8, \"Busque por assunto, autoria, nome...\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, BookListComponent_div_9_Template, 2, 1, \"div\", 4);\n      i0.ɵɵtemplate(10, BookListComponent_div_10_Template, 2, 1, \"div\", 5);\n      i0.ɵɵtemplate(11, BookListComponent_div_11_Template, 2, 1, \"div\", 6);\n      i0.ɵɵpipe(12, \"async\");\n      i0.ɵɵtemplate(13, BookListComponent_ng_template_13_Template, 8, 0, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r3 = i0.ɵɵreference(14);\n\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formControl\", ctx.searchBar);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.totalBooksFound > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(12, 5, ctx.booksFound$))(\"ngIfElse\", _r3);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlDirective, i4.BookComponent, i2.AsyncPipe],\n  styles: [\"section[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n  align-items: center;\\n  min-height: 100%;\\n}\\n\\nheader[_ngcontent-%COMP%] {\\n  color: #6C63FF;\\n  font-style: normal;\\n  font-weight: 600;\\n  font-size: 24px;\\n  line-height: 36px;\\n  margin-top: 76px;\\n  margin-bottom: 5px;\\n  filter: drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25));\\n  font-family: 'Poppins', sans-serif;\\n}\\n\\nsection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 588px;\\n  height: 56px;\\n  border: 2px solid #6C63FF;\\n  border-radius: 10px;\\n  outline: 0;\\n  box-sizing: border-box;\\n  top: 220px;\\n  background: url('logo-google.png');\\n  background-repeat: no-repeat;\\n  background-position-y: center;\\n  background-position-x: 4.08%;\\n  font-family: 'Poppins', sans-serif;\\n  font-style: normal;\\n  font-weight: 400;\\n  font-size: 16px;\\n  line-height: 24px;\\n  padding-left: 20px;\\n}\\n\\nsection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-family: 'Poppins';\\n  font-style: normal;\\n  font-weight: 400;\\n  font-size: 16px;\\n  line-height: 24px;\\n  color: #8B8B8B;\\n}\\n\\n.results[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  margin-top: 2rem;\\n  font-family: 'Poppins';\\n  font-style: normal;\\n  font-weight: 400;\\n  font-size: 16px;\\n  line-height: 24px;\\n  color: #8B8B8B;\\n}\\n\\n.error-message[_ngcontent-%COMP%] {\\n  color: #6C63FF;\\n}\\n\\ninput[type='search'][_ngcontent-%COMP%]:focus {\\n  background-image: none;\\n  outline: none;\\n  text-decoration: none;\\n  padding-left: 10px;\\n}\\n\\ninput[type=\\\"search\\\"][_ngcontent-%COMP%]::-webkit-search-decoration, [_ngcontent-%COMP%]::-webkit-search-cancel-button, [_ngcontent-%COMP%]::-webkit-search-results-button, [_ngcontent-%COMP%]::-webkit-search-results-decoration { display: none; }\\n\\nsection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  border: none;\\n  text-decoration: none;\\n  background: none;\\n  position: relative;\\n  top: 0.3rem;\\n  right: 50px;\\n}\\n\\n.search[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n\\n.test[_ngcontent-%COMP%] {\\n  cursor:auto;\\n  background-color: orange;\\n  font-family: \\\"Poppins\\\";\\n  font-size: 20px;\\n  cursor: pointer;\\n}\\n\\n.container-card[_ngcontent-%COMP%] {\\n  margin-bottom: 2rem;\\n  display: flex;\\n  flex-wrap: wrap;\\n  justify-content: center;\\n  margin-left: 80px;\\n  margin-right: 80px;\\n}\\n\\n.images[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n\\n.ilustration[_ngcontent-%COMP%] {\\n  margin-top: 72px;\\n  margin-left: 130px;\\n  margin-right: 64px;\\n}\\n\\n.title[_ngcontent-%COMP%] {\\n  margin-top: 72px;\\n  margin-left: 64px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2stbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixvREFBb0Q7RUFDcEQsa0NBQWtDO0FBQ3BDOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFlBQVk7RUFDWix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFVBQVU7RUFDVixzQkFBc0I7RUFDdEIsVUFBVTtFQUNWLGtDQUF1RDtFQUN2RCw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLDRCQUE0QjtFQUM1QixrQ0FBa0M7RUFDbEMsa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsZ0JBQWdCO0VBQ2hCLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsYUFBYTtFQUNiLHFCQUFxQjtFQUNyQixrQkFBa0I7QUFDcEI7O0FBRUE7OztzQ0FHc0MsYUFBYSxFQUFFOztBQUVyRDtFQUNFLFlBQVk7RUFDWixxQkFBcUI7RUFDckIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsV0FBVztBQUNiOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsV0FBVztFQUNYLHdCQUF3QjtFQUN4QixzQkFBc0I7RUFDdEIsZUFBZTtFQUNmLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLGVBQWU7RUFDZix1QkFBdUI7RUFDdkIsaUJBQWlCO0VBQ2pCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtBQUNuQiIsImZpbGUiOiJib29rLWxpc3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbInNlY3Rpb24ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWluLWhlaWdodDogMTAwJTtcbn1cblxuaGVhZGVyIHtcbiAgY29sb3I6ICM2QzYzRkY7XG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgZm9udC1zaXplOiAyNHB4O1xuICBsaW5lLWhlaWdodDogMzZweDtcbiAgbWFyZ2luLXRvcDogNzZweDtcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICBmaWx0ZXI6IGRyb3Atc2hhZG93KDBweCA0cHggNHB4IHJnYmEoMCwgMCwgMCwgMC4yNSkpO1xuICBmb250LWZhbWlseTogJ1BvcHBpbnMnLCBzYW5zLXNlcmlmO1xufVxuXG5zZWN0aW9uIGlucHV0IHtcbiAgd2lkdGg6IDU4OHB4O1xuICBoZWlnaHQ6IDU2cHg7XG4gIGJvcmRlcjogMnB4IHNvbGlkICM2QzYzRkY7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIG91dGxpbmU6IDA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHRvcDogMjIwcHg7XG4gIGJhY2tncm91bmQ6IHVybCguLi8uLi8uLi9hc3NldHMvaW1hZ2VzL2xvZ28tZ29vZ2xlLnBuZyk7XG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gIGJhY2tncm91bmQtcG9zaXRpb24teTogY2VudGVyO1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uLXg6IDQuMDglO1xuICBmb250LWZhbWlseTogJ1BvcHBpbnMnLCBzYW5zLXNlcmlmO1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDI0cHg7XG4gIHBhZGRpbmctbGVmdDogMjBweDtcbn1cblxuc2VjdGlvbiBwIHtcbiAgZm9udC1mYW1pbHk6ICdQb3BwaW5zJztcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBmb250LXdlaWdodDogNDAwO1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICBjb2xvcjogIzhCOEI4Qjtcbn1cblxuLnJlc3VsdHMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgbWFyZ2luLXRvcDogMnJlbTtcbiAgZm9udC1mYW1pbHk6ICdQb3BwaW5zJztcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBmb250LXdlaWdodDogNDAwO1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICBjb2xvcjogIzhCOEI4Qjtcbn1cblxuLmVycm9yLW1lc3NhZ2Uge1xuICBjb2xvcjogIzZDNjNGRjtcbn1cblxuaW5wdXRbdHlwZT0nc2VhcmNoJ106Zm9jdXMge1xuICBiYWNrZ3JvdW5kLWltYWdlOiBub25lO1xuICBvdXRsaW5lOiBub25lO1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gIHBhZGRpbmctbGVmdDogMTBweDtcbn1cblxuaW5wdXRbdHlwZT1cInNlYXJjaFwiXTo6LXdlYmtpdC1zZWFyY2gtZGVjb3JhdGlvbixcbjo6LXdlYmtpdC1zZWFyY2gtY2FuY2VsLWJ1dHRvbixcbjo6LXdlYmtpdC1zZWFyY2gtcmVzdWx0cy1idXR0b24sXG46Oi13ZWJraXQtc2VhcmNoLXJlc3VsdHMtZGVjb3JhdGlvbiB7IGRpc3BsYXk6IG5vbmU7IH1cblxuc2VjdGlvbiBidXR0b24ge1xuICBib3JkZXI6IG5vbmU7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgYmFja2dyb3VuZDogbm9uZTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0b3A6IDAuM3JlbTtcbiAgcmlnaHQ6IDUwcHg7XG59XG5cbi5zZWFyY2gge1xuICBkaXNwbGF5OiBmbGV4O1xufVxuXG4udGVzdCB7XG4gIGN1cnNvcjphdXRvO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBvcmFuZ2U7XG4gIGZvbnQtZmFtaWx5OiBcIlBvcHBpbnNcIjtcbiAgZm9udC1zaXplOiAyMHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5jb250YWluZXItY2FyZCB7XG4gIG1hcmdpbi1ib3R0b206IDJyZW07XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtd3JhcDogd3JhcDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1hcmdpbi1sZWZ0OiA4MHB4O1xuICBtYXJnaW4tcmlnaHQ6IDgwcHg7XG59XG5cbi5pbWFnZXMge1xuICBkaXNwbGF5OiBmbGV4O1xufVxuXG4uaWx1c3RyYXRpb24ge1xuICBtYXJnaW4tdG9wOiA3MnB4O1xuICBtYXJnaW4tbGVmdDogMTMwcHg7XG4gIG1hcmdpbi1yaWdodDogNjRweDtcbn1cblxuLnRpdGxlIHtcbiAgbWFyZ2luLXRvcDogNzJweDtcbiAgbWFyZ2luLWxlZnQ6IDY0cHg7XG59XG5cblxuXG5cblxuXG5cblxuXG5cbiJdfQ== */\"]\n});","map":{"version":3,"mappings":"AAEA,SAAgBA,UAAhB,EAAwCC,YAAxC,EAAsDC,oBAAtD,EAA4EC,MAA5E,EAAoFC,GAApF,EAAyFC,SAAzF,EAAoGC,GAApG,QAA2H,MAA3H;AACA,SAASC,WAAT,QAA4B,gBAA5B;;;;;;;;;ICSEC;IACEA;IACFA;;;;;IADEA;IAAAA;;;;;;IAEFA;IACEA;IACFA;;;;;IADEA;IAAAA;;;;;;IAGFA;IACEA;IACFA;;;;;IADYA;IAAAA;;;;;;IAFdA;IACEA;IAGFA;;;;;IAHwBA;IAAAA;;;;;;IAKtBA,gCAAoB,CAApB,EAAoB,IAApB,EAAoB,EAApB;IACoBA;IAAeA;IAAKA;IAAcA;IAAKA;IAAcA;IACvEA;IAIFA;;;;ADxBF,MAAMC,KAAK,GAAG,IAAd;AAMA,OAAM,MAAOC,iBAAP,CAAwB;EAK5BC,YACUC,WADV,EACkC;IAAxB;IALV,iBAAY,IAAIL,WAAJ,EAAZ;IACA,oBAAuB,EAAvB;IAOA,mBAAc,KAAKM,SAAL,CAAeC,YAAf,CAA4BC,IAA5B,CACZZ,MAAM,CAAEa,KAAD,IAAWA,KAAK,CAACC,MAAN,IAAgB,CAA5B,CADM,EAEZhB,YAAY,CAACQ,KAAD,CAFA,EAGZP,oBAAoB,EAHR,EAIZI,GAAG,CAAC,MAAMY,OAAO,CAACC,GAAR,CAAY,2BAAZ,CAAP,CAJS,EAKZd,SAAS,CAA8Be,UAAD,IAAe;MACnD,MAAMC,QAAQ,GAAG,KAAKT,WAAL,CAAiBU,MAAjB,CAAwBF,UAAxB,CAAjB;MACA,OAAOC,QAAP;IACD,CAHQ,CALG,CAAd;IAWA,wBAAmB,KAAKE,WAAL,CAAiBR,IAAjB,CACjBX,GAAG,CAAEoB,KAAD,IAAWA,KAAK,CAACP,MAAlB,CADc,CAAnB;EAbK;;AAPuB;;;mBAAjBP,mBAAiBF;AAAA;;;QAAjBE;EAAiBe;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZ9BrB,mCAA2B,CAA3B,EAA2B,QAA3B;MACUA;MAAuBA;MAC/BA;MACEA;MAIAA;MACEA;MACFA;MAEFA;MAAGA;MAAoCA;MACvCA;MAGAA;MAGFA;;MAKAA;MAvBAA;;;;;;MAKMA;MAAAA;MAOgCA;MAAAA;MAGdA;MAAAA;MAGKA;MAAAA,8DAA0B,UAA1B,EAA0BsB,GAA1B","names":["Observable","debounceTime","distinctUntilChanged","filter","map","switchMap","tap","FormControl","i0","DELAY","BookListComponent","constructor","bookService","searchBar","valueChanges","pipe","input","length","console","log","typedValue","bookList","search","booksFound$","books","selectors","decls","vars","consts","template","_r3"],"sourceRoot":"","sources":["/home/thomas/thomas/angular-rxjs/src/app/views/book-list/book-list.component.ts","/home/thomas/thomas/angular-rxjs/src/app/views/book-list/book-list.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { BookService } from '../../services/book.service';\nimport { EMPTY, Observable, catchError, debounceTime, distinctUntilChanged, filter, map, switchMap, tap, throwError } from 'rxjs';\nimport { FormControl } from '@angular/forms';\nimport { Book } from 'src/app/models/book.interface';\n\nconst DELAY = 1000\n@Component({\n  selector: 'app-book-list',\n  templateUrl: './book-list.component.html',\n  styleUrls: ['./book-list.component.css']\n})\nexport class BookListComponent {\n  searchBar = new FormControl()\n  errorMessage: string = ''\n  totalBooksFound: number\n\n  constructor(\n    private bookService: BookService\n  ) { }\n\n  booksFound$ = this.searchBar.valueChanges.pipe(\n    filter((input) => input.length >= 3),\n    debounceTime(DELAY),\n    distinctUntilChanged(),\n    tap(() => console.log(\"começa a fazer requisição\")),\n    switchMap<string, Observable<Book[]>>((typedValue) => {\n      const bookList = this.bookService.search(typedValue)\n      return bookList\n    })\n  )\n\n  totalBooksFound$ = this.booksFound$.pipe(\n    map((books) => books.length)\n  )\n\n}\n\n\n\n","<section class=\"container\">\n  <header>Que livro você procura?</header>\n  <div class=\"search\">\n    <input\n      type=\"search\"\n      [formControl]=\"searchBar\"\n    >\n    <button>\n      <img src=\"assets/images/icone-busca.png\" alt=\"Lupa de cor roxa\">\n    </button>\n  </div>\n  <p>Busque por assunto, autoria, nome...</p>\n  <div class=\"results error-message\" *ngIf=\"errorMessage\">\n    {{ errorMessage }}\n  </div>\n  <div class=\"results\" *ngIf=\"totalBooksFound > 0\">\n    {{ totalBooksFound }} de livros encontrados\n  </div>\n<div class=\"container-card\" *ngIf=\"booksFound$ | async as bookList, else initialScreen\">\n  <div *ngFor=\"let book of bookList\">\n    <app-book [book]=\"book\"></app-book>\n  </div>\n</div>\n<ng-template #initialScreen>\n  <div class=\"images\">\n    <h1 class=\"title\">Busque o livro <br> que quiser na <br> nossa estante!</h1>\n    <img\n      class=\"ilustration\"\n      src=\"../../assets/images/ilustracao-estante.png\"\n      alt=\"Ilustração de uma pessoa em pé ao lado de uma estante com livros e plantas\">\n  </div>\n</ng-template>\n"]},"metadata":{},"sourceType":"module"}